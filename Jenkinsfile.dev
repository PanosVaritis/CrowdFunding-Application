pipeline {
    agent any 

    environent {
        GITHUB_TOKEN=credentials('github-token')
        GITHUB_USERNAME='panosvaritis'
        GITHUB_URL='ghcr.io'
        IMAGE_P1="${GITHUB_TOKEN}/${GITHUB_USERNAME}"
    }

    parameters {
        bolleanParam (name: 'DEBUG', defaultValue: false, description: 'Used to show info about token')
    }

        stages {
            
            stage ('Welcome message'){
                steps {
                    sh """
                    echo "Hello from jenkins server"
                    """
                }
            }
            stage ('Clean workspace'){
                steps {
                    cleanWs()
                }
            }
            stage ('Checkout the code'){
                steps {
                    checkout scm
                }
            }
            stage ('DEBUG'){
                steps {
                    script{
                        if (params.DEBUG){
                            echo "Git hub username: ${GITHUB_USERNAME}"
                            echo "Git hub url: ${GITHUB_URL}"
                            echo "Git hub token: ${GITHUB_TOKEN}"
                            echo "Image name prefix: ${IMAGE_P1}"
                        }else {
                            echo "Nothing to show"
                        }
                    }
                }
            }
            
        }
}